"use strict";angular.module("isuWorldStandingsApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/men",{templateUrl:"views/main.html",controller:"MenCtrl"}).when("/ladies",{templateUrl:"views/main.html",controller:"LadiesCtrl"}).when("/pairs",{templateUrl:"views/main.html",controller:"PairsCtrl"}).when("/dance",{templateUrl:"views/main.html",controller:"DanceCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/men"})}]),angular.module("isuWorldStandingsApp").controller("NavCtrl",["$scope","$location",function(a,b){a.navLinks=[{title:"men",linkText:"Men"},{title:"ladies",linkText:"Ladies"},{title:"pairs",linkText:"Pairs"},{title:"dance",linkText:"Ice Dance"},{title:"about",linkText:"About"}],a.navClass=function(a){return b.path().substring(1)===a?"active":""}}]),angular.module("isuWorldStandingsApp").controller("MainCtrl",["$scope","$location","isuwsService",function(a,b,c){function d(b){for(var c=0;c<a.counries.length;c++)if(a.counries[c].ioc===b)return a.counries[c]}function e(a){for(var b=0,c=!0,d=a.length-1;d>=0;d--){var e=a[d],f=1;c&&(f=.7),b+=Math.round(e.bestISU*f)+Math.round(e.bestGP*f)+Math.round(e.secondGP*f)+Math.round(e.bestOther*f)+Math.round(e.secondOther*f),c=!1}return b}function f(a){var b=[],c=a.find(".season").find("span"),d=a.find(".bestISU").find("span"),e=a.find(".bestGrandPrix").find("span"),f=a.find(".secondGrandPrix").find("span"),h=a.find(".bestSelectedInternational").find("span"),i=a.find(".secondSelectedInternational").find("span");return b[0]=g(c[0].firstChild.data,d[0].firstChild.data,e[0].firstChild.data,f[0].firstChild.data,h[0].firstChild.data,i[0].firstChild.data),b[1]=g(c[1].firstChild.data.replace("100%","70%"),d[1].firstChild.data,e[1].firstChild.data,f[1].firstChild.data,h[1].firstChild.data,i[1].firstChild.data),b}function g(a,b,c,d,e,f){var g={};return g.season=a,g.bestISU=h(b,0),g.bestGP=h(c,0),g.secondGP=h(d,0),g.bestOther=h(e,0),g.secondOther=h(f,0),g}function h(a,b){return a&&!isNaN(a)?parseInt(a):b}c.getCountries().success(function(b){a.counries=b}),this.getLastUpdated=function(a){return angular.element(a).find("#DataList1").find("tr").last().find("td").text()},this.parseHtml=function(a){for(var b=angular.element(a).find("#DataList1").find(".content"),c=[],g=0;g<b.length;g++){var h={},i=angular.element(b[g]),j=i.find(".name").find("a");h.name=j.text(),j.attr("href")&&(h.href=j.attr("href")),j.attr("class")&&(h["class"]=j.attr("class")),h.country=d(i.find(".name").find("span").text()),h.seasons=f(i),h.points=e(h.seasons),c[g]=h}return c}}]).controller("MenCtrl",["$scope","$controller","isuwsService",function(a,b,c){var d=b("MainCtrl",{$scope:a});c.getMen().success(function(b){a.skaters=d.parseHtml(b),a.activeTab="men",a.lastUpdated=d.getLastUpdated(b)})}]).controller("LadiesCtrl",["$scope","$controller","isuwsService",function(a,b,c){var d=b("MainCtrl",{$scope:a});c.getLadies().success(function(b){a.skaters=d.parseHtml(b),a.activeTab="ladies",a.lastUpdated=d.getLastUpdated(b)})}]).controller("PairsCtrl",["$scope","$controller","isuwsService",function(a,b,c){var d=b("MainCtrl",{$scope:a});c.getPairs().success(function(b){a.skaters=d.parseHtml(b),a.activeTab="pairs",a.lastUpdated=d.getLastUpdated(b)})}]).controller("DanceCtrl",["$scope","$controller","isuwsService",function(a,b,c){var d=b("MainCtrl",{$scope:a});c.getDance().success(function(b){a.skaters=d.parseHtml(b),a.activeTab="dance",a.lastUpdated=d.getLastUpdated(b)})}]),angular.module("isuWorldStandingsApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("isuWorldStandingsApp").factory("isuwsService",["$http",function(a){var b={};return b.getLadies=function(){return a.get("data/wsladies.htm")},b.getMen=function(){return a.get("data/wsmen.htm")},b.getPairs=function(){return a.get("data/wspairs.htm")},b.getDance=function(){return a.get("data/wsdance.htm")},b.getCountries=function(){return a.get("data/countries.json")},b}]);